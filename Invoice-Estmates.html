<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PaintQuote Pro â€“ Estimates & Invoices</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { display: ['Manrope', 'Segoe UI', 'sans-serif'] },
          colors: { brand: { blue: '#2563eb', slate: '#0f172a' } }
        }
      }
    };
  </script>
  <style>
    body { font-family: 'Manrope', 'Segoe UI', sans-serif; }
  </style>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-slate-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo } = React;

    const Icon = ({ size = 20, className = '', children }) => (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        width={size}
        height={size}
        className={className}
        fill="none"
        stroke="currentColor"
        strokeWidth="1.75"
        strokeLinecap="round"
        strokeLinejoin="round"
      >
        {children}
      </svg>
    );

    const Plus = (props) => (
      <Icon {...props}>
        <line x1="12" y1="5" x2="12" y2="19" />
        <line x1="5" y1="12" x2="19" y2="12" />
      </Icon>
    );

    const Trash = (props) => (
      <Icon {...props}>
        <polyline points="3 6 5 6 21 6" />
        <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" />
        <path d="M10 11v6" />
        <path d="M14 11v6" />
        <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" />
      </Icon>
    );

    const CalculatorIcon = (props) => (
      <Icon {...props}>
        <rect x="4" y="2" width="16" height="20" rx="2" />
        <line x1="8" y1="6" x2="16" y2="6" />
        <path d="M8 10h.01M12 10h.01M16 10h.01M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01" />
      </Icon>
    );

    const SettingsIcon = (props) => (
      <Icon {...props}>
        <circle cx="12" cy="12" r="3" />
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.6 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09A1.65 1.65 0 0 0 15 4.6a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9c.74 0 1.37.48 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1Z" />
      </Icon>
    );

    const DollarIcon = (props) => (
      <Icon {...props}>
        <path d="M12 2v20" />
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 1 1 0 7H6" />
      </Icon>
    );

    const PaintingEstimator = () => {
      const [activeTab, setActiveTab] = useState('estimate');
      
      const [config, setConfig] = useState({
        companyName: 'Your Painting Co.',
        companyPhone: '555-0123',
        taxRate: 0,
        markup: 20,
        paintCostPerGal: 45.0,
        coveragePerGal: 350,
        rates: {
          wallSqFt: 1.5,
          ceilingSqFt: 1.25,
          door: 40.0,
          window: 35.0,
          baseboardLinFt: 1.5,
          trimLinFt: 1.5,
          cabinet: 75.0
        }
      });

      const [jobDetails, setJobDetails] = useState({
        clientName: '',
        address: '',
        date: new Date().toISOString().slice(0, 10),
        notes: ''
      });

      const [rooms, setRooms] = useState([
        {
          id: 1,
          name: 'Living Room',
          l: 15,
          w: 12,
          h: 9,
          doors: 2,
          windows: 2,
          includeCeiling: true,
          includeBaseboards: true
        }
      ]);

      const calculateRoom = (room) => {
        const length = Number(room.l) || 0;
        const width = Number(room.w) || 0;
        const height = Number(room.h) || 0;
        const perimeter = (length + width) * 2;
        const wallArea = perimeter * height;
        const ceilingArea = length * width;

        let cost = 0;
        cost += wallArea * config.rates.wallSqFt;
        if (room.includeCeiling) cost += ceilingArea * config.rates.ceilingSqFt;
        cost += (Number(room.doors) || 0) * config.rates.door;
        cost += (Number(room.windows) || 0) * config.rates.window;
        if (room.includeBaseboards) cost += perimeter * config.rates.baseboardLinFt;

        return { wallArea, ceilingArea, perimeter, baseCost: cost };
      };

      const totals = useMemo(() => {
        let totalBaseCost = 0;
        let totalSqFtForPaint = 0;
  
        rooms.forEach((room) => {
          const calcs = calculateRoom(room);
          totalBaseCost += calcs.baseCost;
          totalSqFtForPaint += calcs.wallArea;
          if (room.includeCeiling) totalSqFtForPaint += calcs.ceilingArea;
        });
  
        const coverage = Math.max(Number(config.coveragePerGal) || 0, 1);
        const paintGallons = totalSqFtForPaint > 0 ? Math.ceil(totalSqFtForPaint / coverage) : 0;
        const paintMaterialsCost = paintGallons * config.paintCostPerGal;
        const subtotal = totalBaseCost + paintMaterialsCost;
        const profitMargin = subtotal * (config.markup / 100);
        const totalBeforeTax = subtotal + profitMargin;
        const taxAmount = totalBeforeTax * (config.taxRate / 100);
        const grandTotal = totalBeforeTax + taxAmount;
  
        return {
          paintGallons,
          paintMaterialsCost,
          laborAndOverhead: totalBaseCost,
          subtotal,
          profitMargin,
          taxAmount,
          grandTotal
        };
      }, [rooms, config]);

      const addRoom = () => {
        const newId = rooms.length ? Math.max(...rooms.map((r) => r.id)) + 1 : 1;
        setRooms([
          ...rooms,
          {
            id: newId,
            name: `Room ${rooms.length + 1}`,
            l: 10,
            w: 10,
            h: 8,
            doors: 1,
            windows: 1,
            includeCeiling: true,
            includeBaseboards: true
          }
        ]);
      };

      const removeRoom = (id) => setRooms(rooms.filter((r) => r.id !== id));

      const updateRoom = (id, field, value) => {
        setRooms(rooms.map((r) => (r.id === id ? { ...r, [field]: value } : r)));
      };

      const updateRate = (field, value) => {
        setConfig((prev) => ({
          ...prev,
          rates: { ...prev.rates, [field]: Number(value) || 0 }
        }));
      };

      const SettingsView = () => (
        <div className="space-y-6">
          <div className="bg-white p-4 rounded-lg shadow border border-gray-200">
            <h3 className="font-bold text-lg mb-4 flex items-center text-slate-700">
              <DollarIcon className="w-5 h-5 mr-2" /> Base Pricing Rates
            </h3>
            <p className="text-sm text-gray-500 mb-4">Set your standard prices here.</p>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Wall Price ($/sqft)</label>
                <input type="number" step="0.05" value={config.rates.wallSqFt} onChange={(e) => updateRate('wallSqFt', e.target.value)} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Ceiling Price ($/sqft)</label>
                <input type="number" step="0.05" value={config.rates.ceilingSqFt} onChange={(e) => updateRate('ceilingSqFt', e.target.value)} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Door Price (Unit)</label>
                <input type="number" step="1.00" value={config.rates.door} onChange={(e) => updateRate('door', e.target.value)} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Window Price (Unit)</label>
                <input type="number" step="1.00" value={config.rates.window} onChange={(e) => updateRate('window', e.target.value)} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Baseboards ($/lin ft)</label>
                <input type="number" step="0.10" value={config.rates.baseboardLinFt} onChange={(e) => updateRate('baseboardLinFt', e.target.value)} className="w-full p-2 border rounded mt-1" />
              </div>
            </div>
          </div>

          <div className="bg-white p-4 rounded-lg shadow border border-gray-200">
            <h3 className="font-bold text-lg mb-4 text-slate-700">Business & Materials</h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Markup / Profit (%)</label>
                <input type="number" value={config.markup} onChange={(e) => setConfig({ ...config, markup: Number(e.target.value) || 0 })} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Tax Rate (%)</label>
                <input type="number" value={config.taxRate} onChange={(e) => setConfig({ ...config, taxRate: Number(e.target.value) || 0 })} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Paint Cost ($/gallon)</label>
                <input type="number" value={config.paintCostPerGal} onChange={(e) => setConfig({ ...config, paintCostPerGal: Number(e.target.value) || 0 })} className="w-full p-2 border rounded mt-1" />
              </div>
              <div>
                <label className="block text-xs font-bold text-gray-600 uppercase">Your Company Name</label>
                <input type="text" value={config.companyName} onChange={(e) => setConfig({ ...config, companyName: e.target.value })} className="w-full p-2 border rounded mt-1" />
              </div>
            </div>
          </div>
        </div>
      );

      const EstimatorView = () => (
        <div className="space-y-6 pb-20">
          <div className="bg-white p-4 rounded-lg shadow border border-gray-200">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <input
                placeholder="Client Name"
                value={jobDetails.clientName}
                onChange={(e) => setJobDetails({ ...jobDetails, clientName: e.target.value })}
                className="p-2 border rounded w-full font-medium"
              />
              <input
                placeholder="Job Address"
                value={jobDetails.address}
                onChange={(e) => setJobDetails({ ...jobDetails, address: e.target.value })}
                className="p-2 border rounded w-full"
              />
            </div>
          </div>

          <div className="space-y-4">
            {rooms.map((room) => {
              const roomStats = calculateRoom(room);
              return (
                <div key={room.id} className="bg-white rounded-lg shadow border border-gray-200 overflow-hidden">
                  <div className="bg-slate-50 p-3 border-b border-gray-200 flex justify-between items-center">
                    <input
                      value={room.name}
                      onChange={(e) => updateRoom(room.id, 'name', e.target.value)}
                      className="font-bold text-slate-700 bg-transparent border-none focus:ring-0 p-0"
                    />
                    <button onClick={() => removeRoom(room.id)} className="text-red-400 hover:text-red-600">
                      <Trash size={18} />
                    </button>
                  </div>
                  
                  <div className="p-4 grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="col-span-2 md:col-span-4 grid grid-cols-3 gap-2">
                      <div>
                        <label className="text-[10px] uppercase font-bold text-gray-500">Length</label>
                        <input type="number" value={room.l} onChange={(e) => updateRoom(room.id, 'l', Number(e.target.value) || 0)} className="w-full p-2 border rounded bg-blue-50" />
                      </div>
                      <div>
                        <label className="text-[10px] uppercase font-bold text-gray-500">Width</label>
                        <input type="number" value={room.w} onChange={(e) => updateRoom(room.id, 'w', Number(e.target.value) || 0)} className="w-full p-2 border rounded bg-blue-50" />
                      </div>
                      <div>
                        <label className="text-[10px] uppercase font-bold text-gray-500">Height</label>
                        <input type="number" value={room.h} onChange={(e) => updateRoom(room.id, 'h', Number(e.target.value) || 0)} className="w-full p-2 border rounded bg-blue-50" />
                      </div>
                    </div>

                    <div>
                      <label className="text-[10px] uppercase font-bold text-gray-500">Doors</label>
                      <input type="number" value={room.doors} onChange={(e) => updateRoom(room.id, 'doors', Number(e.target.value) || 0)} className="w-full p-2 border rounded" />
                    </div>
                    <div>
                      <label className="text-[10px] uppercase font-bold text-gray-500">Windows</label>
                      <input type="number" value={room.windows} onChange={(e) => updateRoom(room.id, 'windows', Number(e.target.value) || 0)} className="w-full p-2 border rounded" />
                    </div>
                    
                    <div className="col-span-2 flex items-center space-x-4 mt-4">
                      <label className="flex items-center space-x-2 cursor-pointer">
                        <input
                          type="checkbox"
                          checked={room.includeCeiling}
                          onChange={(e) => updateRoom(room.id, 'includeCeiling', e.target.checked)}
                          className="w-4 h-4 text-blue-600"
                        />
                        <span className="text-sm font-medium">Ceiling</span>
                      </label>
                      <label className="flex items-center space-x-2 cursor-pointer">
                        <input
                          type="checkbox"
                          checked={room.includeBaseboards}
                          onChange={(e) => updateRoom(room.id, 'includeBaseboards', e.target.checked)}
                          className="w-4 h-4 text-blue-600"
                        />
                        <span className="text-sm font-medium">Baseboards</span>
                      </label>
                    </div>
                  </div>
                  
                  <div className="bg-gray-50 px-4 py-2 text-xs text-gray-500 flex justify-between border-t border-gray-100">
                    <span>Walls: {Math.round(roomStats.wallArea)} sq ft</span>
                    <span className="font-bold text-green-600">Room Est: ${roomStats.baseCost.toFixed(2)}</span>
                  </div>
                </div>
              );
            })}
            
            <button
              onClick={addRoom}
              className="w-full py-3 border-2 border-dashed border-blue-300 text-blue-500 rounded-lg hover:bg-blue-50 font-medium flex items-center justify-center"
            >
              <Plus size={20} className="mr-2" /> Add Room / Area
            </button>
          </div>

          <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 shadow-lg z-50 md:relative md:shadow-none md:border-none md:bg-transparent md:p-0">
            <div className="max-w-3xl mx-auto flex justify-between items-center">
              <div>
                <div className="text-xs text-gray-500">Est. Paint Needed</div>
                <div className="font-bold text-gray-700">{totals.paintGallons} Gallons</div>
              </div>
              <div className="text-right">
                <div className="text-xs text-gray-500">Total Quote</div>
                <div className="font-bold text-xl text-green-600">${totals.grandTotal.toFixed(2)}</div>
              </div>
            </div>
          </div>
        </div>
      );

      const InvoiceView = () => (
        <div className="bg-white shadow-lg rounded-lg p-8 max-w-2xl mx-auto print:shadow-none print:w-full">
          <div className="flex justify-between items-start border-b-2 border-gray-800 pb-6 mb-6">
            <div>
              <h1 className="text-2xl font-bold text-gray-900">{config.companyName}</h1>
              <p className="text-gray-500 mt-1">{config.companyPhone}</p>
              <div className="mt-4 text-sm">
                <p className="font-bold">Bill To:</p>
                <p>{jobDetails.clientName || 'Client Name'}</p>
                <p>{jobDetails.address || 'Job Address'}</p>
              </div>
            </div>
            <div className="text-right">
              <h2 className="text-4xl font-bold text-gray-200">INVOICE</h2>
              <p className="text-gray-500 mt-2">Date: {jobDetails.date}</p>
            </div>
          </div>

          <div className="mb-8">
            <table className="w-full text-left">
              <thead>
                <tr className="border-b border-gray-300">
                  <th className="py-2 font-bold text-gray-700 w-1/2">Description</th>
                  <th className="py-2 font-bold text-gray-700 text-right">Details</th>
                  <th className="py-2 font-bold text-gray-700 text-right">Amount</th>
                </tr>
              </thead>
              <tbody>
                {rooms.map((room, i) => {
                  const stats = calculateRoom(room);
                  return (
                    <tr key={i} className="border-b border-gray-100">
                      <td className="py-3">
                        <span className="font-bold block">{room.name}</span>
                        <span className="text-xs text-gray-500">
                          {room.l}'x{room.w}'x{room.h}' | {room.doors} Doors, {room.windows} Windows
                          {room.includeCeiling ? ', Ceiling' : ''}
                          {room.includeBaseboards ? ', Baseboards' : ''}
                        </span>
                      </td>
                      <td className="py-3 text-right text-sm text-gray-600">
                        {Math.round(stats.wallArea)} sq ft wall<br/>
                        {room.includeCeiling ? Math.round(stats.ceilingArea) + ' sq ft ceil' : ''}
                      </td>
                      <td className="py-3 text-right font-medium">
                        ${(stats.baseCost * (1 + config.markup / 100)).toFixed(2)}
                      </td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>

          <div className="flex justify-end">
            <div className="w-1/2 space-y-2">
              <div className="flex justify-between text-sm text-gray-600">
                <span>Materials (Est. {totals.paintGallons} gal)</span>
                <span>Included</span>
              </div>
              <div className="flex justify-between font-bold text-lg pt-2 border-t border-gray-300">
                <span>Total</span>
                <span>${totals.grandTotal.toFixed(2)}</span>
              </div>
            </div>
          </div>

          <div className="mt-12 pt-4 border-t border-gray-200 text-center text-sm text-gray-500">
            <p>Thank you for your business!</p>
          </div>
          
          <button
            onClick={() => window.print()}
            className="mt-8 w-full bg-slate-800 text-white py-3 rounded-lg font-medium hover:bg-slate-700 print:hidden"
          >
            Print Invoice / Save PDF
          </button>
        </div>
      );

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-900 to-slate-100">
          <div className="bg-slate-900 text-white p-4 sticky top-0 z-40 shadow-md">
            <div className="max-w-3xl mx-auto flex justify-between items-center">
              <h1 className="font-bold text-lg flex items-center gap-2">
                <CalculatorIcon size={20} className="text-blue-400" />
                PaintQuote Pro
              </h1>
              <div className="flex space-x-1 bg-slate-800 p-1 rounded-lg">
                <button
                  onClick={() => setActiveTab('config')}
                  className={`p-2 rounded-md transition-colors ${activeTab === 'config' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}
                >
                  <SettingsIcon size={18} />
                </button>
                <button
                  onClick={() => setActiveTab('estimate')}
                  className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${activeTab === 'estimate' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}
                >
                  Estimate
                </button>
                <button
                  onClick={() => setActiveTab('invoice')}
                  className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${activeTab === 'invoice' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}
                >
                  Invoice
                </button>
              </div>
            </div>
          </div>

          <div className="max-w-3xl mx-auto p-4">
            {activeTab === 'config' && <SettingsView />}
            {activeTab === 'estimate' && <EstimatorView />}
            {activeTab === 'invoice' && <InvoiceView />}
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<PaintingEstimator />);
  </script>
</body>
</html>
